<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <script src="fabric.js"></script>
        <script src="../scripts/svg.js"></script>
        <title>Image Editor</title>
        <style>
        .svg-button {
            background-color: transparent;
            border: none;
            width: 50px;
            height: 50px;
            margin: 5px;
            position: absolute;
            top: 0;
            left: 0;
            color: transparent; 
            cursor: pointer;
        }
        #btnClear {
            left: 60px;
        }

        #btnSave {
            left: 120px;
        }
        </style>
    </head>
    <body>
        <canvas id="c" width="800" height="600"></canvas>
        <button id="btnAddText" class="svg-button" title="Add Text Box "></button>
        <button id="btnClear" class="svg-button" title="Reset Canvas"></button>
        <button id="btnSave" class="svg-button" title="Finish Editing"></button>
        <script>
            const urlParams = new URLSearchParams(window.location.search);
            const canvas = new fabric.Canvas('c');
            console.log(urlParams.get('json'));
            if (urlParams.get('json')!=""){
                canvas.loadFromJSON(urlParams.get('json'), canvas.renderAll.bind(canvas));
                window.resizeTo(JSON.parse(urlParams.get('json')).width, JSON.parse(urlParams.get('json')).height);
            }
            function resizeCanvas() {
                canvas.setWidth(window.innerWidth);
                canvas.setHeight(window.innerHeight);
                canvas.renderAll();
            }
            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();
        </script>
        <script src="imageeditor.js"></script>
    </body>
</html>
